#   Author        =   @ T4Bl3rUs
#   Description   =   Triggered when a player finishes
#   Called By     =   games:18/repeating

tag @s add finished
clear @s minecraft:carrot_on_a_stick
effect give @s minecraft:weakness infinite 255 true
execute unless score endtme= 18scores matches -1 at @s run particle minecraft:firework ~ ~1 ~ 1.5 1.5 1.5 0.1 70 force
execute unless score endtme= 18scores matches -1 as @a[tag=ingame] at @s run playsound minecraft:ui.toast.challenge_complete master @s ~ ~ ~ 1 2

scoreboard players operation @s 18times = time= 18scores
scoreboard players operation @s 18times *= -1 Numbers

scoreboard players operation sec= 18scores = time= 18scores
scoreboard players operation sec= 18scores /= 20 Numbers
scoreboard players operation @s 18sec = sec= 18scores

scoreboard players operation dec= 18scores = time= 18scores
scoreboard players operation dec= 18scores %= 20 Numbers
scoreboard players operation dec= 18scores *= 5 Numbers
scoreboard players operation @s 18dec = dec= 18scores

# Stores the result of a loot table in the random= score which chooses the message
execute store result score random= 18scores run loot spawn ~ -70 ~ loot games:18finish
# If the random= score is a specific number, it chooses a specific message
tag @s add this

execute unless score endtme= 18scores matches -1 if score random= 18scores matches 1 unless score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish1","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 2 unless score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish2","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 3 unless score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish3","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 4 unless score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish4","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 5 unless score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish5","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}

execute unless score endtme= 18scores matches -1 if score random= 18scores matches 1 if score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish1","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 2 if score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish2","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 3 if score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish3","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 4 if score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish4","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 5 if score dec= 18scores matches ..9 run tellraw @a[tag=playing,tag=!this] {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish5","with":[{"selector":"@s","color":"white","type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}]}],"source":"storage","type":"nbt"}


execute unless score endtme= 18scores matches -1 if score random= 18scores matches 1 unless score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish1","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 2 unless score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish2","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 3 unless score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish3","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 4 unless score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish4","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 5 unless score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish5","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}

execute unless score endtme= 18scores matches -1 if score random= 18scores matches 1 if score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish1","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 2 if score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish2","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 3 if score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish3","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 4 if score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish4","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}
execute unless score endtme= 18scores matches -1 if score random= 18scores matches 5 if score dec= 18scores matches ..9 run tellraw @s {"nbt":"colors.base","storage":"minecraft:config","interpret":true,"extra":[{"translate":"game.FriendlyFaceOff.Finish5","with":[{"selector":"@s","color":"white","bold":true,"type":"selector"},{"nbt":"colors.game.friendlyfaceoff.timer","storage":"minecraft:config","interpret":true,"extra":[{"score":{"name":"sec=","objective":"18scores"},"bold":false,"type":"score"},{"text":".0","type":"text"},{"score":{"name":"dec=","objective":"18scores"},"type":"score"}],"source":"storage","type":"nbt"}],"bold":false}],"source":"storage","type":"nbt"}

tag @s remove this

gamemode spectator @s

#Modify display
function games:18/display